{"ast":null,"code":"import \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.replace.js\";\nimport \"core-js/modules/es.string.replace-all.js\";\nimport \"core-js/modules/es.array.find-index.js\";\nimport \"core-js/modules/es.array.splice.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.object.to-string.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport firebase from \"./services/firebase.js\";\nimport urlParams from \"./services/url-params.js\";\nimport myLocalStorage from \"./services/my-local-storage.js\";\nimport PanelUser from \"./components/PanelUser.vue\";\nimport PanelForum from \"./components/PanelForum.vue\";\nimport FormNewRoom from \"./components/FormNewRoom.vue\";\nimport FormLogin from \"./components/FormLogin.vue\";\nimport OfflineAlert from \"./components/OfflineAlert.vue\";\nexport default {\n  name: \"App\",\n  components: {\n    PanelUser: PanelUser,\n    PanelForum: PanelForum,\n    FormNewRoom: FormNewRoom,\n    FormLogin: FormLogin,\n    OfflineAlert: OfflineAlert\n  },\n  data: function data() {\n    return {\n      hasRoom: false,\n      loginStatus: \"\",\n      isOnline: navigator.onLine,\n      isLoaded: false,\n      room: {\n        id: \"\",\n        name: \"\"\n      },\n      loggedUser: {\n        userId: \"\",\n        isAdmin: false,\n        username: \"\",\n        email: \"\"\n      },\n      questions: []\n    };\n  },\n  methods: {\n    setData: function setData(data) {\n      this.room = data.room;\n      this.loggedUser = data.loggedUser;\n      this.questions = data.questions;\n    },\n    getData: function getData() {\n      return {\n        hasRoom: this.hasRoom,\n        loginStatus: this.loginStatus,\n        room: this.room,\n        loggedUser: this.loggedUser,\n        questions: this.questions\n      };\n    },\n    resetData: function resetData() {\n      this.hasRoom = this.loggedUser.isAdmin = false;\n      this.loginStatus = this.room.id = this.room.name = this.loggedUser.userId = this.loggedUser.username = this.loggedUser.email = \"\";\n      this.questions = [];\n    },\n    setHasRoom: function setHasRoom(val) {\n      this.hasRoom = Boolean(val);\n    },\n    login: function login() {\n      var _this = this;\n\n      firebase.login(function (user) {\n        myLocalStorage.set({\n          loggedUser_userId: user.uid,\n          loggedUser_username: user.displayName.replaceAll(\" \", \"_\"),\n          loggedUser_email: user.email,\n          loggedUser_isAdmin: \"true\",\n          loginStatus: \"valid\"\n        });\n\n        _this.checkLogin();\n      });\n    },\n    changeEmail: function changeEmail() {\n      var _this2 = this;\n\n      firebase.logout(function () {\n        _this2.login();\n      });\n    },\n    loadQuestions: function loadQuestions() {\n      var _this3 = this;\n\n      firebase.loadAllQuestionOnce(this.room.id, function (res) {\n        res.onRoomDeleted(_this3.room.id, function () {\n          if (!_this3.loggedUser.isAdmin) alert(\"This room was no longer available\");\n\n          _this3.resetData();\n\n          myLocalStorage.remove([\"hasRoom\"]);\n          urlParams.delete([\"id\", \"name\"]);\n        });\n        res.onQuestionAdded(_this3.room.id, function (res) {\n          _this3.questions.push(res.question);\n\n          res.onQuestionChildChanged(_this3.room.id, res.question.key, function (changedQuestion) {\n            var questionIndex = _this3.questions.findIndex(function (question) {\n              return question.key == changedQuestion.key;\n            });\n\n            if (questionIndex >= 0) _this3.questions[questionIndex] = changedQuestion;\n            if (changedQuestion.userId == _this3.loggedUser.userId) _this3.username = changedQuestion.username;\n          });\n          res.onUsersHandsUpChanged(_this3.room.id, res.question.key, function (questionKey, changedUsersHandsUp) {\n            var questionIndex = _this3.questions.findIndex(function (question) {\n              return question.key == questionKey;\n            });\n\n            if (questionIndex >= 0) _this3.questions[questionIndex].usersHandsUp = changedUsersHandsUp;\n          });\n        });\n        res.onQuestionRemoved(_this3.room.id, function (removedQuestionKey) {\n          var questionIndex = _this3.questions.findIndex(function (question) {\n            return question.key == removedQuestionKey;\n          });\n\n          if (questionIndex >= 0) _this3.questions.splice(questionIndex, 1);\n        });\n        _this3.isLoaded = true;\n      });\n    },\n    newRoom: function newRoom(roomName) {\n      var _this4 = this;\n\n      firebase.newRoom(roomName, function (res) {\n        var roomId = res.value.roomId,\n            roomName = res.value.roomName;\n        _this4.hasRoom = true;\n        myLocalStorage.set({\n          hasRoom: \"true\"\n        });\n        urlParams.set({\n          id: roomId,\n          name: roomName\n        });\n        /*this.initFirebaseEvent({\r\n        \tonRoomDeleted: res.onRoomDeleted,\r\n        \tonQuestionAdded: res.onQuestionAdded,\r\n        \tonQuestionRemoved: res.onQuestionRemoved\r\n        });*/\n      });\n    },\n    closeRoom: function closeRoom() {\n      firebase.deleteRoom(this.room.id);\n    },\n    addQuestion: function addQuestion(content) {\n      if (this.loggedUser.username.length < 1) this.loggedUser.username = \"Anonymous\";\n      firebase.pushQuestion(this.room.id, this.loggedUser.userId, this.loggedUser.username, content);\n    },\n    changeUsername: function changeUsername(username) {\n      var _this5 = this;\n\n      var questionsKey = this.questions.filter(function (question) {\n        return question.userId == _this5.loggedUser.userId;\n      }).map(function (question) {\n        return question.key;\n      });\n      if (questionsKey.length > 0) firebase.changeUsername(this.room.id, questionsKey, username);\n    },\n    changeUsersHandsUp: function changeUsersHandsUp(questionKey, newVal) {\n      var _this6 = this;\n\n      if (newVal) {\n        firebase.addUsersHandsUp(this.room.id, questionKey, this.loggedUser.userId);\n        return;\n      }\n\n      var questionsInd = this.questions.findIndex(function (question) {\n        return question.key == questionKey;\n      });\n      if (questionsInd < 0) return;\n      var usersHandsUpInd = this.questions[questionsInd].usersHandsUp.findIndex(function (user) {\n        return user.userId == _this6.loggedUser.userId;\n      });\n\n      if (usersHandsUpInd >= 0 && !newVal) {\n        var usersHandsUpKey = this.questions[questionsInd].usersHandsUp[usersHandsUpInd].key;\n        firebase.removeUsersHandsUp(this.room.id, questionKey, usersHandsUpKey);\n      }\n    },\n    toggleAdminMode: function toggleAdminMode() {\n      this.loggedUser.isAdmin = !this.loggedUser.isAdmin;\n    },\n    checkHasRoom: function checkHasRoom() {\n      var hasRoom = urlParams.has(\"id\") && urlParams.has(\"name\");\n      var localData = myLocalStorage.get([\"hasRoom\"]);\n      if (hasRoom && hasOwnProperty.call(localData, \"hasRoom\")) hasRoom = localData.hasRoom === \"true\";\n      if (hasRoom) this.hasRoom = hasRoom;else document.location.href = document.location.host;\n      return hasRoom;\n    },\n    checkLogin: function checkLogin() {\n      var localData = myLocalStorage.get([\"loggedUser_userId\", \"loggedUser_username\", \"loggedUser_email\", \"loggedUser_isAdmin\", \"loginStatus\"]);\n      if (hasOwnProperty.call(localData, \"loggedUser_userId\")) this.loggedUser.userId = localData.loggedUser_userId;\n      if (hasOwnProperty.call(localData, \"loggedUser_username\")) this.loggedUser.username = localData.loggedUser_username;\n      if (hasOwnProperty.call(localData, \"loggedUser_username\")) this.loggedUser.email = localData.loggedUser_email;\n      if (hasOwnProperty.call(localData, \"loggedUser_isAdmin\")) this.loggedUser.isAdmin = localData.loggedUser_isAdmin === \"true\";\n      if (hasOwnProperty.call(localData, \"loginStatus\")) this.loginStatus = localData.loginStatus;\n      console.log(this.loggedUser.email);\n    },\n    updateOnlineStatus: function updateOnlineStatus(event) {\n      this.isOnline = event.type === \"online\";\n    },\n    test: function test() {\n      alert(\"Test success!\");\n    }\n  },\n  watch: {\n    isOnline: function isOnline(newVal, oldVal) {\n      if (newVal && !oldVal && !this.isLoaded) this.loadQuestions();\n    }\n  },\n  beforeMount: function beforeMount() {\n    var room = urlParams.get([\"id\", \"name\"]);\n    if (room.id !== null) this.room.id = room.id;\n    if (room.name !== null) this.room.name = room.name;\n    var hasRoomUrl = room.id !== null && room.name !== null;\n    if (hasRoomUrl && this.checkHasRoom()) this.hasRoom = true;\n    if (this.hasRoom && this.isOnline) this.loadQuestions();\n  },\n  mounted: function mounted() {\n    this.checkLogin();\n    console.log(this.loggedUser.email);\n    if (this.loggedUser.email === null) this.loginStatus = \"\";\n    window.addEventListener(\"online\", this.updateOnlineStatus);\n    window.addEventListener(\"offline\", this.updateOnlineStatus);\n  },\n  beforeDestroy: function beforeDestroy() {\n    window.removeEventListener(\"online\", this.updateOnlineStatus);\n    window.removeEventListener(\"offline\", this.updateOnlineStatus);\n  }\n};","map":{"version":3,"mappings":"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","names":["name","components","PanelUser","PanelForum","FormNewRoom","FormLogin","OfflineAlert","data","hasRoom","loginStatus","isOnline","isLoaded","room","id","loggedUser","userId","isAdmin","username","email","questions","methods","setData","getData","resetData","setHasRoom","val","login","firebase","myLocalStorage","loggedUser_userId","loggedUser_username","loggedUser_email","loggedUser_isAdmin","changeEmail","loadQuestions","res","alert","urlParams","newRoom","roomName","closeRoom","addQuestion","content","changeUsername","changeUsersHandsUp","questionKey","newVal","toggleAdminMode","checkHasRoom","document","checkLogin","console","updateOnlineStatus","event","test","watch","oldVal","beforeMount","mounted","window","beforeDestroy"],"sourceRoot":"src","sources":["App.vue"],"sourcesContent":["<template>\r\n\t<div id=\"app\" class=\"container-lg\">\r\n\t\t<div v-if=\"hasRoom\" class=\"panel-wrapper\">\r\n\t\t\t<PanelUser :userId=\"loggedUser.userId\" :isAdmin=\"loggedUser.isAdmin\" :username=\"loggedUser.username\" :email=\"loggedUser.email\" />\r\n\t\t\t<PanelForum :forumName=\"room.name\" :questions=\"questions\" :loggedUserId=\"loggedUser.userId\" />\r\n\t\t</div>\r\n\t\t<FormNewRoom v-else />\r\n\t\t<FormLogin v-if=\"loginStatus != 'valid'\" />\r\n\t\t<OfflineAlert v-if=\"!isOnline\" />\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nimport firebase from \"./services/firebase.js\";\r\nimport urlParams from \"./services/url-params.js\";\r\nimport myLocalStorage from \"./services/my-local-storage.js\";\r\n\r\nimport PanelUser from \"./components/PanelUser.vue\";\r\nimport PanelForum from \"./components/PanelForum.vue\";\r\nimport FormNewRoom from \"./components/FormNewRoom.vue\";\r\nimport FormLogin from \"./components/FormLogin.vue\";\r\nimport OfflineAlert from \"./components/OfflineAlert.vue\";\r\n\r\nexport default {\r\n\tname: \"App\",\r\n\tcomponents: {\r\n\t\tPanelUser,\r\n\t\tPanelForum,\r\n\t\tFormNewRoom,\r\n\t\tFormLogin,\r\n\t\tOfflineAlert\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\thasRoom: false,\r\n\t\t\tloginStatus: \"\",\r\n\t\t\tisOnline: navigator.onLine,\r\n\t\t\tisLoaded: false,\r\n\t\t\troom: {\r\n\t\t\t\tid: \"\",\r\n\t\t\t\tname: \"\"\r\n\t\t\t},\r\n\t\t\tloggedUser: {\r\n\t\t\t\tuserId: \"\",\r\n\t\t\t\tisAdmin: false,\r\n\t\t\t\tusername: \"\",\r\n\t\t\t\temail: \"\"\r\n\t\t\t},\r\n\t\t\tquestions: []\r\n\t\t};\r\n\t},\r\n\tmethods: {\r\n\t\tsetData(data){\r\n\t\t\tthis.room = data.room;\r\n\t\t\tthis.loggedUser = data.loggedUser;\r\n\t\t\tthis.questions = data.questions;\r\n\t\t},\r\n\t\tgetData(){\r\n\t\t\treturn {\r\n\t\t\t\thasRoom: this.hasRoom,\r\n\t\t\t\tloginStatus: this.loginStatus,\r\n\t\t\t\troom: this.room,\r\n\t\t\t\tloggedUser: this.loggedUser,\r\n\t\t\t\tquestions: this.questions\r\n\t\t\t};\r\n\t\t},\r\n\t\tresetData(){\r\n\t\t\tthis.hasRoom = this.loggedUser.isAdmin = false;\r\n\t\t\tthis.loginStatus = this.room.id = this.room.name = this.loggedUser.userId = this.loggedUser.username = this.loggedUser.email = \"\" ;\r\n\t\t\tthis.questions = [];\r\n\t\t},\r\n\t\tsetHasRoom(val){\r\n\t\t\tthis.hasRoom = Boolean(val);\r\n\t\t},\r\n\t\tlogin(){\r\n\t\t\tfirebase.login(user => {\r\n\t\t\t\tmyLocalStorage.set({\r\n\t\t\t\t\tloggedUser_userId: user.uid,\r\n\t\t\t\t\tloggedUser_username: user.displayName.replaceAll(\" \", \"_\"),\r\n\t\t\t\t\tloggedUser_email: user.email,\r\n\t\t\t\t\tloggedUser_isAdmin: \"true\",\r\n\t\t\t\t\tloginStatus: \"valid\"\r\n\t\t\t\t});\r\n\r\n\t\t\t\tthis.checkLogin();\r\n\t\t\t});\r\n\t\t},\r\n\t\tchangeEmail(){\r\n\t\t\tfirebase.logout(() => {\r\n\t\t\t\tthis.login();\r\n\t\t\t});\r\n\t\t},\r\n\t\tloadQuestions(){\r\n\t\t\tfirebase.loadAllQuestionOnce(this.room.id, res => {\r\n\t\t\t\tres.onRoomDeleted(this.room.id, () => {\r\n\t\t\t\t\tif(!this.loggedUser.isAdmin)\r\n\t\t\t\t\t\talert(\"This room was no longer available\");\r\n\r\n\t\t\t\t\tthis.resetData();\r\n\t\t\t\t\tmyLocalStorage.remove([\"hasRoom\"]);\r\n\t\t\t\t\turlParams.delete([\"id\", \"name\"]);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tres.onQuestionAdded(this.room.id, res => {\r\n\t\t\t\t\tthis.questions.push(res.question);\r\n\r\n\t\t\t\t\tres.onQuestionChildChanged(this.room.id, res.question.key, changedQuestion => {\r\n\t\t\t\t\t\tconst questionIndex = this.questions.findIndex(question => question.key == changedQuestion.key);\r\n\t\t\t\t\t\tif(questionIndex >= 0)\r\n\t\t\t\t\t\t\tthis.questions[questionIndex] = changedQuestion;\r\n\r\n\t\t\t\t\t\tif(changedQuestion.userId == this.loggedUser.userId)\r\n\t\t\t\t\t\t\tthis.username = changedQuestion.username;\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tres.onUsersHandsUpChanged(this.room.id, res.question.key, (questionKey, changedUsersHandsUp) => {\r\n\t\t\t\t\t\tconst questionIndex = this.questions.findIndex(question => question.key == questionKey);\r\n\t\t\t\t\t\tif(questionIndex >= 0)\r\n\t\t\t\t\t\t\tthis.questions[questionIndex].usersHandsUp = changedUsersHandsUp;\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\r\n\t\t\t\tres.onQuestionRemoved(this.room.id, removedQuestionKey => {\r\n\t\t\t\t\tconst questionIndex = this.questions.findIndex(question => question.key == removedQuestionKey);\r\n\t\t\t\t\tif(questionIndex >= 0)\r\n\t\t\t\t\t\tthis.questions.splice(questionIndex, 1);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tthis.isLoaded = true;\r\n\t\t\t});\r\n\t\t},\r\n\t\tnewRoom(roomName){\r\n\t\t\tfirebase.newRoom(roomName, res => {\r\n\t\t\t\tconst roomId = res.value.roomId,\r\n\t\t\t\t\troomName = res.value.roomName;\r\n\r\n\t\t\t\tthis.hasRoom = true;\r\n\t\t\t\tmyLocalStorage.set({ hasRoom: \"true\" });\r\n\t\t\t\turlParams.set({\r\n\t\t\t\t\tid: roomId,\r\n\t\t\t\t\tname: roomName\r\n\t\t\t\t});\r\n\r\n\t\t\t\t/*this.initFirebaseEvent({\r\n\t\t\t\t\tonRoomDeleted: res.onRoomDeleted,\r\n\t\t\t\t\tonQuestionAdded: res.onQuestionAdded,\r\n\t\t\t\t\tonQuestionRemoved: res.onQuestionRemoved\r\n\t\t\t\t});*/\r\n\t\t\t});\r\n\t\t},\r\n\t\tcloseRoom(){\r\n\t\t\tfirebase.deleteRoom(this.room.id);\r\n\t\t},\r\n\t\taddQuestion(content){\r\n\t\t\tif(this.loggedUser.username.length < 1)\r\n\t\t\t\tthis.loggedUser.username = \"Anonymous\";\r\n\t\t\tfirebase.pushQuestion(this.room.id, this.loggedUser.userId, this.loggedUser.username, content);\r\n\t\t},\r\n\t\tchangeUsername(username){\r\n\t\t\tconst questionsKey = this.questions.filter(question => question.userId == this.loggedUser.userId).map(question => question.key);\r\n\t\t\tif(questionsKey.length > 0)\r\n\t\t\t\tfirebase.changeUsername(this.room.id, questionsKey, username);\r\n\t\t},\r\n\t\tchangeUsersHandsUp(questionKey, newVal){\r\n\t\t\tif(newVal){\r\n\t\t\t\tfirebase.addUsersHandsUp(this.room.id, questionKey, this.loggedUser.userId);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst questionsInd = this.questions.findIndex(question => question.key == questionKey);\r\n\t\t\tif(questionsInd < 0) return;\r\n\r\n\t\t\tconst usersHandsUpInd = this.questions[questionsInd].usersHandsUp.findIndex(user => user.userId == this.loggedUser.userId);\r\n\t\t\tif(usersHandsUpInd >= 0 && !newVal){\r\n\t\t\t\tconst usersHandsUpKey = this.questions[questionsInd].usersHandsUp[usersHandsUpInd].key;\r\n\t\t\t\tfirebase.removeUsersHandsUp(this.room.id, questionKey, usersHandsUpKey);\r\n\t\t\t}\r\n\t\t},\r\n\t\ttoggleAdminMode(){\r\n\t\t\tthis.loggedUser.isAdmin = !this.loggedUser.isAdmin;\r\n\t\t},\r\n\t\tcheckHasRoom(){\r\n\t\t\tlet hasRoom = urlParams.has(\"id\") && urlParams.has(\"name\");\r\n\r\n\t\t\tconst localData = myLocalStorage.get([\"hasRoom\"]);\r\n\t\t\tif(hasRoom && hasOwnProperty.call(localData, \"hasRoom\"))\r\n\t\t\t\thasRoom = localData.hasRoom === \"true\";\r\n\r\n\t\t\tif(hasRoom) this.hasRoom = hasRoom;\r\n\t\t\telse document.location.href = document.location.host;\r\n\r\n\t\t\treturn hasRoom;\r\n\t\t},\r\n\t\tcheckLogin(){\r\n\t\t\tconst localData = myLocalStorage.get([\"loggedUser_userId\", \"loggedUser_username\", \"loggedUser_email\", \"loggedUser_isAdmin\", \"loginStatus\"]);\r\n\r\n\t\t\tif(hasOwnProperty.call(localData, \"loggedUser_userId\"))\r\n\t\t\t\tthis.loggedUser.userId = localData.loggedUser_userId;\r\n\t\t\tif(hasOwnProperty.call(localData, \"loggedUser_username\"))\r\n\t\t\t\tthis.loggedUser.username = localData.loggedUser_username;\r\n\t\t\tif(hasOwnProperty.call(localData, \"loggedUser_username\"))\r\n\t\t\t\tthis.loggedUser.email = localData.loggedUser_email;\r\n\t\t\tif(hasOwnProperty.call(localData, \"loggedUser_isAdmin\"))\r\n\t\t\t\tthis.loggedUser.isAdmin = localData.loggedUser_isAdmin === \"true\";\r\n\t\t\tif(hasOwnProperty.call(localData, \"loginStatus\"))\r\n\t\t\t\tthis.loginStatus = localData.loginStatus;\r\n\r\n\t\t\tconsole.log(this.loggedUser.email);\r\n\t\t},\r\n\t\tupdateOnlineStatus(event){\r\n\t\t\tthis.isOnline = event.type === \"online\";\r\n\t\t},\r\n\t\ttest(){\r\n\t\t\talert(\"Test success!\");\r\n\t\t}\r\n\t},\r\n\twatch: {\r\n\t\tisOnline(newVal, oldVal){\r\n\t\t\tif(newVal && !oldVal && !this.isLoaded)\r\n\t\t\t\tthis.loadQuestions();\r\n\t\t}\r\n\t},\r\n\tbeforeMount(){\r\n\t\tconst room = urlParams.get([\"id\", \"name\"]);\r\n\r\n\t\tif(room.id !== null)\r\n\t\t\tthis.room.id = room.id;\r\n\t\tif(room.name !== null)\r\n\t\t\tthis.room.name = room.name;\r\n\r\n\t\tconst hasRoomUrl = room.id !== null && room.name !== null;\r\n\t\tif(hasRoomUrl && this.checkHasRoom())\r\n\t\t\tthis.hasRoom = true;\r\n\r\n\t\tif(this.hasRoom && this.isOnline)\r\n\t\t\tthis.loadQuestions();\r\n\t},\r\n\tmounted(){\r\n\t\tthis.checkLogin();\r\n\t\tconsole.log(this.loggedUser.email);\r\n\t\tif(this.loggedUser.email === null)\r\n\t\t\tthis.loginStatus = \"\";\r\n\r\n\t\twindow.addEventListener(\"online\", this.updateOnlineStatus);\r\n\t\twindow.addEventListener(\"offline\", this.updateOnlineStatus);\r\n\t},\r\n\tbeforeDestroy(){\r\n\t\twindow.removeEventListener(\"online\", this.updateOnlineStatus);\r\n\t\twindow.removeEventListener(\"offline\", this.updateOnlineStatus);\r\n\t}\r\n};\r\n</script>\r\n"]},"metadata":{},"sourceType":"module"}