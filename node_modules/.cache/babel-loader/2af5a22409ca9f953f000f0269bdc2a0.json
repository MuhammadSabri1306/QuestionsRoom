{"ast":null,"code":"import \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.replace.js\";\nimport \"core-js/modules/es.string.replace-all.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.regexp.to-string.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport firebase from \"./services/firebase.js\";\nimport urlParams from \"./services/url-params.js\";\nimport myLocalStorage from \"./services/my-local-storage.js\";\nimport PanelUser from \"./components/PanelUser.vue\";\nimport PanelForum from \"./components/PanelForum.vue\";\nimport FormNewRoom from \"./components/FormNewRoom.vue\";\nimport FormLogin from \"./components/FormLogin.vue\";\nexport default {\n  name: \"App\",\n  components: {\n    PanelUser: PanelUser,\n    PanelForum: PanelForum,\n    FormNewRoom: FormNewRoom,\n    FormLogin: FormLogin\n  },\n  data: function data() {\n    return {\n      hasRoom: false,\n      loginStatus: \"\",\n      room: {\n        id: \"\",\n        name: \"\"\n      },\n      loggedUser: {\n        userId: \"\",\n        isAdmin: false,\n        username: \"\",\n        email: \"\"\n      },\n      questions: []\n    };\n  },\n  methods: {\n    setData: function setData(data) {\n      this.room = data.room;\n      this.loggedUser = data.loggedUser;\n      this.questions = data.questions;\n    },\n    getData: function getData() {\n      return {\n        hasRoom: this.hasRoom,\n        loginStatus: this.loginStatus,\n        room: this.room,\n        loggedUser: this.loggedUser,\n        questions: this.questions\n      };\n    },\n    setHasRoom: function setHasRoom(val) {\n      this.hasRoom = Boolean(val);\n    },\n    login: function login() {\n      firebase.login(function (user) {\n        /*this.loggedUser.userId = user.uid;\r\n        this.loggedUser.username = user.displayName.replaceAll(\" \", \"_\");\r\n        this.loggedUser.email = user.email;\r\n        this.loggedUser.isAdmin = true;\r\n        this.loginStatus = \"valid\";*/\n        myLocalStorage.set({\n          loggedUser_userId: user.uid,\n          loggedUser_username: user.displayName.replaceAll(\" \", \"_\"),\n          loggedUser_email: user.email,\n          loggedUser_isAdmin: \"true\",\n          loginStatus: \"valid\"\n        });\n      });\n    },\n    newRoom: function newRoom(roomName) {\n      var _this = this;\n\n      firebase.newRoom(roomName, function (room) {\n        _this.room.id = room.id;\n        _this.room.name = room.name;\n        _this.hasRoom = true;\n        urlParams.set({\n          id: _this.room.id,\n          name: _this.room.name\n        });\n        /*\t\t\t\tfirebase.event.onQuestionChanged(this.room.id, question => {\r\n        \t\t\t\t\tthis.questions.push(question);\r\n        \t\t\t\t}, question => {\r\n        \t\t\t\t\tconst questionIndex = this.questions.indexOf(question);\r\n        \t\t\t\t\tif(questionIndex >= 0)\r\n        \t\t\t\t\t\tthis.questions.splice(questionIndex, 1);\r\n        \t\t\t\t});*/\n      });\n    },\n    closeRoom: function closeRoom() {\n      var _this2 = this;\n\n      firebase.deleteRoom(this.room.id, function () {\n        urlParams.delete(\"room\");\n        _this2.hasRoom = _this2.loggedUser.isAdmin = false;\n        _this2.loginStatus = _this2.room.id = _this2.room.name = _this2.loggedUser.userId = _this2.loggedUser.username = _this2.loggedUser.email = \"\";\n        _this2.questions = [];\n      });\n    },\n    addQuestion: function addQuestion(content) {\n      if (this.loggedUser.username.length < 1) this.loggedUser.username = \"Anonymous\";\n      firebase.pushQuestion(this.room.id, this.loggedUser.userId, this.loggedUser.username, content);\n    },\n    changeUsername: function changeUsername(username) {\n      var _this3 = this;\n\n      firebase.changeUsername(this.room.id, this.loggedUser.userId, username, function (questions) {\n        _this3.questions = questions;\n      });\n    },\n    toggleAdminMode: function toggleAdminMode() {\n      this.loggedUser.isAdmin = !this.loggedUser.isAdmin;\n    },\n    test: function test() {\n      alert(\"Test success!\");\n    }\n  },\n  created: function created() {\n    var roomId = urlParams.get(\"room\"),\n        roomName = urlParams.get(\"name\");\n    if (roomId !== null) this.room.id = roomId;\n    if (roomName !== null) this.room.name = roomName;\n  },\n  mounted: function mounted() {\n    var isEmailRegistered = this.loggedUser.email !== null;\n\n    if (this.hasRoom && isEmailRegistered) {\n      this.loggedUser.username = \"Anonymous\";\n\n      var idGen = function idGen() {\n        return ((1 + Math.random()) * 0x10000 | 0).toString(16).substring(1);\n      };\n\n      this.loggedUser.userId = idGen() + idGen() + \"-\" + idGen() + idGen() + idGen() + idGen();\n    }\n\n    var localData = myLocalStorage.get([\"loggedUser_userId\", \"loggedUser_username\", \"loggedUser_email\", \"loggedUser_isAdmin\", \"loginStatus\"]);\n    if (hasOwnProperty.call(localData, \"loggedUser_userId\")) this.loggedUser.userId = localData.loggedUser_userId;\n    if (hasOwnProperty.call(localData, \"loggedUser_username\")) this.loggedUser.username = localData.loggedUser_username;\n    if (hasOwnProperty.call(localData, \"loggedUser_username\")) this.loggedUser.email = localData.loggedUser_email;\n    if (hasOwnProperty.call(localData, \"loggedUser_isAdmin\")) this.loggedUser.isAdmin = localData.loggedUser_isAdmin === \"true\";\n    if (hasOwnProperty.call(localData, \"loginStatus\")) this.loginStatus = localData.loginStatus;\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;AAYA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACAA,aADA;AAEAC;AACAC,wBADA;AAEAC,0BAFA;AAGAC,4BAHA;AAIAC;AAJA,GAFA;AAQAC,MARA,kBAQA;AACA;AACAC,oBADA;AAEAC,qBAFA;AAGAC;AACAC,cADA;AAEAV;AAFA,OAHA;AAOAW;AACAC,kBADA;AAEAC,sBAFA;AAGAC,oBAHA;AAIAC;AAJA,OAPA;AAaAC;AAbA;AAeA,GAxBA;AAyBAC;AACAC,WADA,mBACAZ,IADA,EACA;AACA;AACA;AACA;AACA,KALA;AAMAa,WANA,qBAMA;AACA;AACAZ,6BADA;AAEAC,qCAFA;AAGAC,uBAHA;AAIAE,mCAJA;AAKAK;AALA;AAOA,KAdA;AAeAI,cAfA,sBAeAC,GAfA,EAeA;AACA;AACA,KAjBA;AAkBAC,SAlBA,mBAkBA;AACAC;AACA;AACA;AACA;AACA;AACA;AAEAC;AACAC,qCADA;AAEAC,oEAFA;AAGAC,sCAHA;AAIAC,oCAJA;AAKApB;AALA;AAOA,OAdA;AAeA,KAlCA;AAmCAqB,WAnCA,mBAmCAC,QAnCA,EAmCA;AAAA;;AACAP;AACA;AACA;AAEA;AACAQ;AACArB,2BADA;AAEAV;AAFA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAjBA;AAkBA,KAtDA;AAuDAgC,aAvDA,uBAuDA;AAAA;;AACAT;AACAQ;AAEA;AACA;AACA;AACA,OANA;AAOA,KA/DA;AAgEAE,eAhEA,uBAgEAC,OAhEA,EAgEA;AACA;AACAX;AACA,KAnEA;AAoEAY,kBApEA,0BAoEArB,QApEA,EAoEA;AAAA;;AACAS;AACA;AACA,OAFA;AAGA,KAxEA;AAyEAa,mBAzEA,6BAyEA;AACA;AACA,KA3EA;AA4EAC,QA5EA,kBA4EA;AACAC;AACA;AA9EA,GAzBA;AAyGAC,SAzGA,qBAyGA;AACA;AAAA,QACAT,gCADA;AAGA,yBACA;AACA,2BACA;AACA,GAjHA;AAkHAU,SAlHA,qBAkHA;AACA;;AACA;AACA;;AAEA;AAAA;AAAA;;AACA;AACA;;AAEA;AACA,6DACA;AACA,+DACA;AACA,+DACA;AACA,8DACA;AACA,uDACA;AACA;AAtIA","names":["name","components","PanelUser","PanelForum","FormNewRoom","FormLogin","data","hasRoom","loginStatus","room","id","loggedUser","userId","isAdmin","username","email","questions","methods","setData","getData","setHasRoom","val","login","firebase","myLocalStorage","loggedUser_userId","loggedUser_username","loggedUser_email","loggedUser_isAdmin","newRoom","roomName","urlParams","closeRoom","addQuestion","content","changeUsername","toggleAdminMode","test","alert","created","mounted"],"sourceRoot":"src","sources":["App.vue"],"sourcesContent":["<template>\r\n\t<div id=\"app\" class=\"container-lg\">\r\n\t\t<div v-if=\"hasRoom\" class=\"panel-wrapper\">\r\n\t\t\t<PanelUser :userId=\"loggedUser.userId\" :isAdmin=\"loggedUser.isAdmin\" :username=\"loggedUser.username\" :email=\"loggedUser.email\" />\r\n\t\t\t<PanelForum :forumName=\"room.name\" :questions=\"questions\" :loggedUserId=\"loggedUser.userId\" />\r\n\t\t</div>\r\n\t\t<FormNewRoom v-else />\r\n\t\t<FormLogin v-if=\"loginStatus != 'valid'\" />\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nimport firebase from \"./services/firebase.js\";\r\nimport urlParams from \"./services/url-params.js\";\r\nimport myLocalStorage from \"./services/my-local-storage.js\";\r\n\r\nimport PanelUser from \"./components/PanelUser.vue\";\r\nimport PanelForum from \"./components/PanelForum.vue\";\r\nimport FormNewRoom from \"./components/FormNewRoom.vue\";\r\nimport FormLogin from \"./components/FormLogin.vue\";\r\n\r\nexport default {\r\n\tname: \"App\",\r\n\tcomponents: {\r\n\t\tPanelUser,\r\n\t\tPanelForum,\r\n\t\tFormNewRoom,\r\n\t\tFormLogin\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\thasRoom: false,\r\n\t\t\tloginStatus: \"\",\r\n\t\t\troom: {\r\n\t\t\t\tid: \"\",\r\n\t\t\t\tname: \"\"\r\n\t\t\t},\r\n\t\t\tloggedUser: {\r\n\t\t\t\tuserId: \"\",\r\n\t\t\t\tisAdmin: false,\r\n\t\t\t\tusername: \"\",\r\n\t\t\t\temail: \"\"\r\n\t\t\t},\r\n\t\t\tquestions: []\r\n\t\t};\r\n\t},\r\n\tmethods: {\r\n\t\tsetData(data){\r\n\t\t\tthis.room = data.room;\r\n\t\t\tthis.loggedUser = data.loggedUser;\r\n\t\t\tthis.questions = data.questions;\r\n\t\t},\r\n\t\tgetData(){\r\n\t\t\treturn {\r\n\t\t\t\thasRoom: this.hasRoom,\r\n\t\t\t\tloginStatus: this.loginStatus,\r\n\t\t\t\troom: this.room,\r\n\t\t\t\tloggedUser: this.loggedUser,\r\n\t\t\t\tquestions: this.questions\r\n\t\t\t};\r\n\t\t},\r\n\t\tsetHasRoom(val){\r\n\t\t\tthis.hasRoom = Boolean(val);\r\n\t\t},\r\n\t\tlogin(){\r\n\t\t\tfirebase.login(user => {\r\n\t\t\t\t/*this.loggedUser.userId = user.uid;\r\n\t\t\t\tthis.loggedUser.username = user.displayName.replaceAll(\" \", \"_\");\r\n\t\t\t\tthis.loggedUser.email = user.email;\r\n\t\t\t\tthis.loggedUser.isAdmin = true;\r\n\t\t\t\tthis.loginStatus = \"valid\";*/\r\n\r\n\t\t\t\tmyLocalStorage.set({\r\n\t\t\t\t\tloggedUser_userId: user.uid,\r\n\t\t\t\t\tloggedUser_username: user.displayName.replaceAll(\" \", \"_\"),\r\n\t\t\t\t\tloggedUser_email: user.email,\r\n\t\t\t\t\tloggedUser_isAdmin: \"true\",\r\n\t\t\t\t\tloginStatus: \"valid\"\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t},\r\n\t\tnewRoom(roomName){\r\n\t\t\tfirebase.newRoom(roomName, room => {\r\n\t\t\t\tthis.room.id = room.id;\r\n\t\t\t\tthis.room.name = room.name;\r\n\r\n\t\t\t\tthis.hasRoom = true;\r\n\t\t\t\turlParams.set({\r\n\t\t\t\t\tid: this.room.id,\r\n\t\t\t\t\tname: this.room.name\r\n\t\t\t\t});\r\n\r\n/*\t\t\t\tfirebase.event.onQuestionChanged(this.room.id, question => {\r\n\t\t\t\t\tthis.questions.push(question);\r\n\t\t\t\t}, question => {\r\n\t\t\t\t\tconst questionIndex = this.questions.indexOf(question);\r\n\t\t\t\t\tif(questionIndex >= 0)\r\n\t\t\t\t\t\tthis.questions.splice(questionIndex, 1);\r\n\t\t\t\t});*/\r\n\t\t\t});\r\n\t\t},\r\n\t\tcloseRoom(){\r\n\t\t\tfirebase.deleteRoom(this.room.id, () => {\r\n\t\t\t\turlParams.delete(\"room\");\r\n\r\n\t\t\t\tthis.hasRoom = this.loggedUser.isAdmin = false;\r\n\t\t\t\tthis.loginStatus = this.room.id = this.room.name = this.loggedUser.userId = this.loggedUser.username = this.loggedUser.email = \"\" ;\r\n\t\t\t\tthis.questions = [];\r\n\t\t\t});\r\n\t\t},\r\n\t\taddQuestion(content){\r\n\t\t\tif(this.loggedUser.username.length < 1) this.loggedUser.username = \"Anonymous\";\r\n\t\t\tfirebase.pushQuestion(this.room.id, this.loggedUser.userId, this.loggedUser.username, content);\r\n\t\t},\r\n\t\tchangeUsername(username){\r\n\t\t\tfirebase.changeUsername(this.room.id, this.loggedUser.userId, username, questions => {\r\n\t\t\t\tthis.questions = questions;\r\n\t\t\t});\r\n\t\t},\r\n\t\ttoggleAdminMode(){\r\n\t\t\tthis.loggedUser.isAdmin = !this.loggedUser.isAdmin;\r\n\t\t},\r\n\t\ttest(){\r\n\t\t\talert(\"Test success!\");\r\n\t\t}\r\n\t},\r\n\tcreated(){\r\n\t\tconst roomId = urlParams.get(\"room\"),\r\n\t\t\troomName = urlParams.get(\"name\");\r\n\r\n\t\tif(roomId !== null)\r\n\t\t\tthis.room.id = roomId;\r\n\t\tif(roomName !== null)\r\n\t\t\tthis.room.name = roomName;\r\n\t},\r\n\tmounted(){\r\n\t\tconst isEmailRegistered = this.loggedUser.email !== null;\r\n\t\tif(this.hasRoom && isEmailRegistered){\r\n\t\t\tthis.loggedUser.username = \"Anonymous\";\r\n\r\n\t\t\tconst idGen = () => (((1 + Math.random()) * 0x10000)|0).toString(16).substring(1);\r\n\t\t\tthis.loggedUser.userId = idGen() + idGen() + \"-\" + idGen() + idGen() + idGen() + idGen();\r\n\t\t}\r\n\r\n\t\tconst localData = myLocalStorage.get([\"loggedUser_userId\", \"loggedUser_username\", \"loggedUser_email\", \"loggedUser_isAdmin\", \"loginStatus\"]);\r\n\t\tif(hasOwnProperty.call(localData, \"loggedUser_userId\"))\r\n\t\t\tthis.loggedUser.userId = localData.loggedUser_userId;\r\n\t\tif(hasOwnProperty.call(localData, \"loggedUser_username\"))\r\n\t\t\tthis.loggedUser.username = localData.loggedUser_username;\r\n\t\tif(hasOwnProperty.call(localData, \"loggedUser_username\"))\r\n\t\t\tthis.loggedUser.email = localData.loggedUser_email;\r\n\t\tif(hasOwnProperty.call(localData, \"loggedUser_isAdmin\"))\r\n\t\t\tthis.loggedUser.isAdmin = localData.loggedUser_isAdmin === \"true\";\r\n\t\tif(hasOwnProperty.call(localData, \"loginStatus\"))\r\n\t\t\tthis.loginStatus = localData.loginStatus;\r\n\t}\r\n};\r\n</script>\r\n"]},"metadata":{},"sourceType":"module"}